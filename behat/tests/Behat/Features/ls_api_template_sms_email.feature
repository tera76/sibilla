@api @smsTemplates
Feature: Using api GET and POST for testing api template-sms-email

  Background: Retrieve Authentication token
    Given Authentication token is done

  Scenario: Api - GET template-sms-email placeholders
    When I request "/template-sms-email/placeholders" using HTTP GET
    Then the response code is 200
    And the response body matches:
    """
    /account/
    """
    And the response body matches:
    """
    /contact/
    """
    And the response body matches:
    """
    /opportunity/
    """

# ************** sms_templates





  @api_post
  Scenario Outline: Api - POST sms_templates: Creates a SmsTemplate resource.
    Given the request body is:
      """
{
	"name": "<name>",
	"category": {"id":"<category>"},
	"template": "bla bla bla"
}
      """
    And the "Content-Type" request header contains "application/json"
    When I request "/sms_templates" using HTTP POST
    Then the response code is 201

    Examples:
      | name                     | category            |
      | test behat sms tpl one   | lead                |
      | test behat sms tpl two   | offer_vehicle_stock |
      | test behat sms tpl three | opportunity         |


  Scenario: Api - GET sms_templates: Retrieves a SmsTemplate resource. - ok dev 30/05/2019
    When I request sms template by name "test behat sms tpl one" using HTTP GET
    Then the response code is 200
    And the response body matches:
    """
    /"name":"test behat sms tpl one"/
    """
    And the response body matches:
    """
    /"template":"bla bla bla"/
    """
    And the response body matches:
    """
    /{"id":"lead","name":"lead"}/
    """
    And the response body matches:
    """
    /"@type":"smstemplate"/
    """



  Scenario: Api - GET sms_templates: Retrieves the collection of SmsTemplate resources.
    When I request "/sms_templates" using HTTP GET
    Then the response code is 200
    And the response body matches:
    """
    /"name":"test behat sms tpl one","template":"bla bla bla","category":\{"id":"lead","name":"lead"\},"@type":"smstemplate"\}/
     """
    And the response body matches:
    """
    /{"createdAt"/
    """
    And the response body matches:
    """
    /"name":"test behat sms tpl three","template":"bla bla bla","category":\{"id":"opportunity","name":"opportunity"\},"@type":"smstemplate"\}/
    """


    #  email_templates




  @api_post
  Scenario Outline: Api - POST email_templates: Creates a EmailTemplate resource. - TO DO TO DO WIP
    Given the request body is:
      """
{
	"loading": false,
	"name": "<name>",
	"category": {
		"id": "<category>",
		"name": null
	},
	"subject": "Template mail for <category>",
	"template": "<span class=\"preheader\" style=\"box-sizing: border-box; color: transparent; display: none; height: 0px; max-height: 0px; max-width: 0px; opacity: 0; overflow-x: hidden; overflow-y: hidden; visibility: hidden; width: 0px;\">This is preheader text. Some clients will show this text as a preview.</span><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"body\" style=\"box-sizing: border-box; border-collapse: separate; background-color: rgb(246, 246, 246); width: 100%;\" width=\"100%\" bgcolor=\"rgb(246, 246, 246)\"><tbody style=\"box-sizing: border-box;\"><tr style=\"box-sizing: border-box;\"><td style=\"box-sizing: border-box; font-family: sans-serif; font-size: 14px; vertical-align: top;\" valign=\"top\"> </td><td class=\"container\" style=\"box-sizing: border-box; font-family: sans-serif; font-size: 14px; vertical-align: top; display: block; max-width: 580px; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; width: 580px; margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto;\" width=\"580\" valign=\"top\"><div class=\"content\" style=\"box-sizing: border-box; display: block; margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; max-width: 580px; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px;\"><!-- START CENTERED WHITE CONTAINER --><table role=\"presentation\" class=\"main\" style=\"box-sizing: border-box; border-collapse: separate; background-image: initial; background-position-x: initial; background-position-y: initial; background-size: initial; background-repeat-x: initial; background-repeat-y: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(255, 255, 255); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; width: 100%;\" width=\"100%\" background=\"initial\" bgcolor=\"rgb(255, 255, 255)\"><!-- START MAIN CONTENT AREA --><tbody style=\"box-sizing: border-box;\"><tr style=\"box-sizing: border-box;\"><td class=\"wrapper\" style=\"font-family: sans-serif; font-size: 14px; vertical-align: top; box-sizing: border-box; padding-top: 20px; padding-right: 20px; padding-bottom: 20px; padding-left: 20px;\" valign=\"top\"><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"box-sizing: border-box; border-collapse: separate; width: 100%;\" width=\"100%\"><tbody style=\"box-sizing: border-box;\"><tr style=\"box-sizing: border-box;\"><td style=\"box-sizing: border-box; font-family: sans-serif; font-size: 14px; vertical-align: top;\" valign=\"top\"><p style=\"box-sizing: border-box; font-family: sans-serif; font-size: 14px; font-weight: normal; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 15px;\">Hi there,</p><p style=\"box-sizing: border-box; font-family: sans-serif; font-size: 14px; font-weight: normal; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 15px;\">Sometimes you just want to send a simple HTML email with a simple design and clear call to action. This is it.</p><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"btn btn-primary\" style=\"border-collapse: separate; box-sizing: border-box; width: 100%;\" width=\"100%\"><tbody style=\"box-sizing: border-box;\"><tr style=\"box-sizing: border-box;\"><td align=\"left\" style=\"box-sizing: border-box; font-family: sans-serif; font-size: 14px; vertical-align: top; padding-bottom: 15px;\" valign=\"top\"><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"box-sizing: border-box; border-collapse: separate; width: auto;\"><tbody style=\"box-sizing: border-box;\"><tr erro\"box-sizing: border-box;\"><td style=\"box-sizing: border-box; font-family: sans-serif; font-size: 14px; vertical-align: top; border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; text-align: center; background-color: rgb(52, 152, 219);\" valign=\"top\" align=\"center\" bgcolor=\"rgb(52, 152, 219)\"> <a href=\"http://htmlemail.io\" target=\"_blank\" style=\"border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-image-source: initial; border-image-slice: initial; border-image-width: initial; border-image-outset: initial; border-image-repeat: initial; border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; box-sizing: border-box; cursor: pointer; display: inline-block; font-size: 14px; font-weight: bold; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 12px; padding-right: 25px; padding-bottom: 12px; padding-left: 25px; text-decoration-line: none; text-decoration-style: initial; text-decoration-color: initial; text-transform: capitalize; background-color: rgb(52, 152, 219); border-top-color: rgb(52, 152, 219); border-right-color: rgb(52, 152, 219); border-bottom-color: rgb(52, 152, 219); border-left-color: rgb(52, 152, 219); color: rgb(255, 255, 255);\">Call To Action</a> </td></tr></tbody></table></td></tr></tbody></table><p style=\"box-sizing: border-box; font-family: sans-serif; font-size: 14px; font-weight: normal; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 15px;\">This is a really simple email template. Its sole purpose is to get the recipient to click the button with no distractions.</p><p style=\"box-sizing: border-box; font-family: sans-serif; font-size: 14px; font-weight: normal; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 15px;\">Good luck! Hope it works.</p></td></tr></tbody></table></td></tr><!-- END MAIN CONTENT AREA --></tbody></table><!-- END CENTERED WHITE CONTAINER --><!-- START FOOTER --><div class=\"footer\" style=\"box-sizing: border-box; clear: both; margin-top: 10px; text-align: center; width: 100%;\"><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"box-sizing: border-box; border-collapse: separate; width: 100%;\" width=\"100%\"><tbody style=\"box-sizing: border-box;\"><tr style=\"box-sizing: border-box;\"><td class=\"content-block\" style=\"box-sizing: border-box; font-family: sans-serif; vertical-align: top; padding-bottom: 10px; padding-top: 10px; color: rgb(153, 153, 153); font-size: 12px; text-align: center;\" valign=\"top\" align=\"center\"><span class=\"apple-link\" style=\"box-sizing: border-box; color: rgb(153, 153, 153); font-size: 12px; text-align: center;\">Company Inc, 3 Abbey Road, San Francisco CA 94102</span><br style=\"box-sizing: border-box;\"> Don't like these emails? <a href=\"##\" style=\"box-sizing: border-box; text-decoration-line: underline; text-decoration-style: initial; text-decoration-color: initial; color: rgb(153, 153, 153); font-size: 12px; text-align: center;\">Unsubscribe</a>.\n              </td></tr><tr style=\"box-sizing: border-box;\"><td class=\"content-block powered-by\" style=\"box-sizing: border-box; font-family: sans-serif; vertical-align: top; padding-bottom: 10px; padding-top: 10px; color: rgb(153, 153, 153); font-size: 12px; text-align: center;\" valign=\"top\" align=\"center\">\n                Powered by LeadSpark\n              </td></tr></tbody></table></div><!-- END FOOTER --></div></td><td style=\"box-sizing: border-box; font-family: sans-serif; font-size: 14px; vertical-align: top;\" valign=\"top\"> </td></tr></tbody></table><style>\n@media all {\n  .ExternalClass,\n.ExternalClass p,\n.ExternalClass span,\n.ExternalClass font,\n.ExternalClass td,\n.ExternalClass div {\n    line-height: 100%;\n  }\n\n  .apple-link a {\n    color: inherit !important;\n    font-family: inherit !important;\n    font-size: inherit !important;\n    font-weight: inherit !important;\n    line-height: inherit !important;\n    text-decoration-line: none !important;\n    text-decoration-style: initial !important;\n    text-decoration-color: initial !important;\n  }\n\n  .btn-primary table td:hover {\n    background-color: rgb(52, 73, 94) !important;\n  }\n\n  .btn-primary a:hover {\n    background-color: rgb(52, 73, 94) !important;\n    border-top-color: rgb(52, 73, 94) !important;\n    border-right-color: rgb(52, 73, 94) !important;\n    border-bottom-color: rgb(52, 73, 94) !important;\n    border-left-color: rgb(52, 73, 94) !important;\n  }\n}\n@media only screen and (max-width: 620px) {\n  table[class=\"body\"] h1 {\n    font-size: 28px !important;\n    margin-bottom: 10px !important;\n  }\n\n  table[class=\"body\"] p,\ntable[class=\"body\"] ul,\ntable[class=\"body\"] ol,\ntable[class=\"body\"] td,\ntable[class=\"body\"] span,\ntable[class=\"body\"] a {\n    font-size: 16px !important;\n  }\n\n  table[class=\"body\"] .wrapper,\ntable[class=\"body\"] .article {\n    padding-top: 10px !important;\n    padding-right: 10px !important;\n    padding-bottom: 10px !important;\n    padding-left: 10px !important;\n  }\n\n  table[class=\"body\"] .content {\n    padding-top: 0px !important;\n    padding-right: 0px !important;\n    padding-bottom: 0px !important;\n    padding-left: 0px !important;\n  }\n\n  table[class=\"body\"] .container {\n    padding-top: 0px !important;\n    padding-right: 0px !important;\n    padding-bottom: 0px !important;\n    padding-left: 0px !important;\n    width: 100% !important;\n  }\n\n  table[class=\"body\"] .main {\n    border-left-width: 0px !important;\n    border-top-left-radius: 0px !important;\n    border-top-right-radius: 0px !important;\n    border-bottom-right-radius: 0px !important;\n    border-bottom-left-radius: 0px !important;\n    border-right-width: 0px !important;\n  }\n\n  table[class=\"body\"] .btn table {\n    width: 100% !important;\n  }\n\n  table[class=\"body\"] .btn a {\n    width: 100% !important;\n  }\n\n  table[class=\"body\"] .img-responsive {\n    height: auto !important;\n    max-width: 100% !important;\n    width: auto !important;\n  }\n}\n</style>",
	"component": "[{\"tagName\":\"span\",\"type\":\"text\",\"content\":\"This is preheader text. Some clients will show this text as a preview.\",\"classes\":[{\"name\":\"preheader\",\"label\":\"preheader\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}]},{\"type\":\"table\",\"content\":\"\",\"classes\":[{\"name\":\"body\",\"label\":\"body\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"attributes\":{\"role\":\"presentation\",\"border\":\"0\",\"cellpadding\":\"0\",\"cellspacing\":\"0\"},\"components\":[{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\" \"},{\"type\":\"cell\",\"content\":\"\",\"classes\":[{\"name\":\"container\",\"label\":\"container\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"components\":[{\"content\":\"\",\"classes\":[{\"name\":\"content\",\"label\":\"content\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"components\":[{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" START CENTERED WHITE CONTAINER \"},{\"type\":\"table\",\"content\":\"\",\"classes\":[{\"name\":\"main\",\"label\":\"main\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"attributes\":{\"role\":\"presentation\"},\"components\":[{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" START MAIN CONTENT AREA \"},{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\",\"classes\":[{\"name\":\"wrapper\",\"label\":\"wrapper\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"components\":[{\"type\":\"table\",\"content\":\"\",\"attributes\":{\"role\":\"presentation\",\"border\":\"0\",\"cellpadding\":\"0\",\"cellspacing\":\"0\"},\"components\":[{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\",\"components\":[{\"tagName\":\"p\",\"type\":\"text\",\"content\":\"Hi there,\"},{\"tagName\":\"p\",\"type\":\"text\",\"content\":\"Sometimes you just want to send a simple HTML email with a simple design and clear call to action. This is it.\"},{\"type\":\"table\",\"content\":\"\",\"classes\":[{\"name\":\"btn\",\"label\":\"btn\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false},{\"name\":\"btn-primary\",\"label\":\"btn-primary\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"attributes\":{\"role\":\"presentation\",\"border\":\"0\",\"cellpadding\":\"0\",\"cellspacing\":\"0\"},\"components\":[{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\",\"attributes\":{\"align\":\"left\"},\"components\":[{\"type\":\"table\",\"content\":\"\",\"attributes\":{\"role\":\"presentation\",\"border\":\"0\",\"cellpadding\":\"0\",\"cellspacing\":\"0\"},\"components\":[{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\",\"components\":[{\"tagName\":\"\",\"type\":\"textnode\",\"content\":\" \"},{\"type\":\"link\",\"status\":\"hovered\",\"content\":\"Call To Action\",\"attributes\":{\"href\":\"http://htmlemail.io\",\"target\":\"_blank\"}},{\"tagName\":\"\",\"type\":\"textnode\",\"content\":\" \"}]}]}]}]}]}]}]}]},{\"tagName\":\"p\",\"type\":\"text\",\"content\":\"This is a really simple email template. Its sole purpose is to get the recipient to click the button with no distractions.\"},{\"tagName\":\"p\",\"type\":\"text\",\"content\":\"Good luck! Hope it works.\"}]}]}]}]}]}]},{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" END MAIN CONTENT AREA \"}]}]},{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" END CENTERED WHITE CONTAINER \"},{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" START FOOTER \"},{\"content\":\"\",\"classes\":[{\"name\":\"footer\",\"label\":\"footer\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"components\":[{\"type\":\"table\",\"content\":\"\",\"attributes\":{\"role\":\"presentation\",\"border\":\"0\",\"cellpadding\":\"0\",\"cellspacing\":\"0\"},\"components\":[{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\",\"classes\":[{\"name\":\"content-block\",\"label\":\"content-block\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"components\":[{\"tagName\":\"span\",\"type\":\"text\",\"content\":\"Company Inc, 3 Abbey Road, San Francisco CA 94102\",\"classes\":[{\"name\":\"apple-link\",\"label\":\"apple-link\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}]},{\"tagName\":\"br\",\"void\":true,\"content\":\"\"},{\"tagName\":\"\",\"type\":\"textnode\",\"content\":\" Don't like these emails? \"},{\"type\":\"link\",\"content\":\"Unsubscribe\",\"attributes\":{\"href\":\"##\"}},{\"tagName\":\"\",\"type\":\"textnode\",\"content\":\".\\n              \"}]}]},{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\\n                Powered by LeadSpark\\n              \",\"classes\":[{\"name\":\"content-block\",\"label\":\"content-block\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false},{\"name\":\"powered-by\",\"label\":\"powered-by\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}]}]}]}]}]},{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" END FOOTER \"}]}]},{\"type\":\"cell\",\"content\":\" \"}]}]}]}]",
	"components": "[{\"tagName\":\"span\",\"type\":\"text\",\"content\":\"This is preheader text. Some clients will show this text as a preview.\",\"classes\":[{\"name\":\"preheader\",\"label\":\"preheader\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}]},{\"type\":\"table\",\"content\":\"\",\"classes\":[{\"name\":\"body\",\"label\":\"body\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"attributes\":{\"role\":\"presentation\",\"border\":\"0\",\"cellpadding\":\"0\",\"cellspacing\":\"0\"},\"components\":[{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\" \"},{\"type\":\"cell\",\"content\":\"\",\"classes\":[{\"name\":\"container\",\"label\":\"container\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"components\":[{\"content\":\"\",\"classes\":[{\"name\":\"content\",\"label\":\"content\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"components\":[{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" START CENTERED WHITE CONTAINER \"},{\"type\":\"table\",\"content\":\"\",\"classes\":[{\"name\":\"main\",\"label\":\"main\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"attributes\":{\"role\":\"presentation\"},\"components\":[{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" START MAIN CONTENT AREA \"},{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\",\"classes\":[{\"name\":\"wrapper\",\"label\":\"wrapper\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"components\":[{\"type\":\"table\",\"content\":\"\",\"attributes\":{\"role\":\"presentation\",\"border\":\"0\",\"cellpadding\":\"0\",\"cellspacing\":\"0\"},\"components\":[{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\",\"components\":[{\"tagName\":\"p\",\"type\":\"text\",\"content\":\"Hi there,\"},{\"tagName\":\"p\",\"type\":\"text\",\"content\":\"Sometimes you just want to send a simple HTML email with a simple design and clear call to action. This is it.\"},{\"type\":\"table\",\"content\":\"\",\"classes\":[{\"name\":\"btn\",\"label\":\"btn\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false},{\"name\":\"btn-primary\",\"label\":\"btn-primary\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"attributes\":{\"role\":\"presentation\",\"border\":\"0\",\"cellpadding\":\"0\",\"cellspacing\":\"0\"},\"components\":[{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\",\"attributes\":{\"align\":\"left\"},\"components\":[{\"type\":\"table\",\"content\":\"\",\"attributes\":{\"role\":\"presentation\",\"border\":\"0\",\"cellpadding\":\"0\",\"cellspacing\":\"0\"},\"components\":[{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\",\"components\":[{\"tagName\":\"\",\"type\":\"textnode\",\"content\":\" \"},{\"type\":\"link\",\"status\":\"hovered\",\"content\":\"Call To Action\",\"attributes\":{\"href\":\"http://htmlemail.io\",\"target\":\"_blank\"}},{\"tagName\":\"\",\"type\":\"textnode\",\"content\":\" \"}]}]}]}]}]}]}]}]},{\"tagName\":\"p\",\"type\":\"text\",\"content\":\"This is a really simple email template. Its sole purpose is to get the recipient to click the button with no distractions.\"},{\"tagName\":\"p\",\"type\":\"text\",\"content\":\"Good luck! Hope it works.\"}]}]}]}]}]}]},{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" END MAIN CONTENT AREA \"}]}]},{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" END CENTERED WHITE CONTAINER \"},{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" START FOOTER \"},{\"content\":\"\",\"classes\":[{\"name\":\"footer\",\"label\":\"footer\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"components\":[{\"type\":\"table\",\"content\":\"\",\"attributes\":{\"role\":\"presentation\",\"border\":\"0\",\"cellpadding\":\"0\",\"cellspacing\":\"0\"},\"components\":[{\"type\":\"tbody\",\"content\":\"\",\"components\":[{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\",\"classes\":[{\"name\":\"content-block\",\"label\":\"content-block\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"components\":[{\"tagName\":\"span\",\"type\":\"text\",\"content\":\"Company Inc, 3 Abbey Road, San Francisco CA 94102\",\"classes\":[{\"name\":\"apple-link\",\"label\":\"apple-link\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}]},{\"tagName\":\"br\",\"void\":true,\"content\":\"\"},{\"tagName\":\"\",\"type\":\"textnode\",\"content\":\" Don't like these emails? \"},{\"type\":\"link\",\"content\":\"Unsubscribe\",\"attributes\":{\"href\":\"##\"}},{\"tagName\":\"\",\"type\":\"textnode\",\"content\":\".\\n              \"}]}]},{\"type\":\"row\",\"content\":\"\",\"components\":[{\"type\":\"cell\",\"content\":\"\\n                Powered by LeadSpark\\n              \",\"classes\":[{\"name\":\"content-block\",\"label\":\"content-block\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false},{\"name\":\"powered-by\",\"label\":\"powered-by\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}]}]}]}]}]},{\"tagName\":\"NULL\",\"type\":\"comment\",\"content\":\" END FOOTER \"}]}]},{\"type\":\"cell\",\"content\":\" \"}]}]}]}]",
	"styles": "[{\"selectors\":[],\"selectorsAdd\":\"img\",\"style\":{\"border-top-width\":\"initial\",\"border-right-width\":\"initial\",\"border-bottom-width\":\"initial\",\"border-left-width\":\"initial\",\"border-top-style\":\"none\",\"border-right-style\":\"none\",\"border-bottom-style\":\"none\",\"border-left-style\":\"none\",\"border-top-color\":\"initial\",\"border-right-color\":\"initial\",\"border-bottom-color\":\"initial\",\"border-left-color\":\"initial\",\"border-image-source\":\"initial\",\"border-image-slice\":\"initial\",\"border-image-width\":\"initial\",\"border-image-outset\":\"initial\",\"border-image-repeat\":\"initial\",\"max-width\":\"100%\"}},{\"selectors\":[],\"selectorsAdd\":\"body\",\"style\":{\"background-color\":\"rgb(246, 246, 246)\",\"font-family\":\"sans-serif\",\"-webkit-font-smoothing\":\"antialiased\",\"font-size\":\"14px\",\"line-height\":\"1.4\",\"margin-top\":\"0px\",\"margin-right\":\"0px\",\"margin-bottom\":\"0px\",\"margin-left\":\"0px\",\"padding-top\":\"0px\",\"padding-right\":\"0px\",\"padding-bottom\":\"0px\",\"padding-left\":\"0px\",\"text-size-adjust\":\"100%\"}},{\"selectors\":[],\"selectorsAdd\":\"table\",\"style\":{\"border-collapse\":\"separate\",\"width\":\"100%\"}},{\"selectors\":[],\"selectorsAdd\":\"table td\",\"style\":{\"font-family\":\"sans-serif\",\"font-size\":\"14px\",\"vertical-align\":\"top\"}},{\"selectors\":[{\"name\":\"body\",\"label\":\"body\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"background-color\":\"rgb(246, 246, 246)\",\"width\":\"100%\"}},{\"selectors\":[{\"name\":\"container\",\"label\":\"container\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"display\":\"block\",\"max-width\":\"580px\",\"padding-top\":\"10px\",\"padding-right\":\"10px\",\"padding-bottom\":\"10px\",\"padding-left\":\"10px\",\"width\":\"580px\",\"margin-top\":\"0px !important\",\"margin-right\":\"auto !important\",\"margin-bottom\":\"0px !important\",\"margin-left\":\"auto !important\"}},{\"selectors\":[{\"name\":\"content\",\"label\":\"content\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"box-sizing\":\"border-box\",\"display\":\"block\",\"margin-top\":\"0px\",\"margin-right\":\"auto\",\"margin-bottom\":\"0px\",\"margin-left\":\"auto\",\"max-width\":\"580px\",\"padding-top\":\"10px\",\"padding-right\":\"10px\",\"padding-bottom\":\"10px\",\"padding-left\":\"10px\"}},{\"selectors\":[{\"name\":\"main\",\"label\":\"main\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"background-image\":\"initial\",\"background-position-x\":\"initial\",\"background-position-y\":\"initial\",\"background-size\":\"initial\",\"background-repeat-x\":\"initial\",\"background-repeat-y\":\"initial\",\"background-attachment\":\"initial\",\"background-origin\":\"initial\",\"background-clip\":\"initial\",\"background-color\":\"rgb(255, 255, 255)\",\"border-top-left-radius\":\"3px\",\"border-top-right-radius\":\"3px\",\"border-bottom-right-radius\":\"3px\",\"border-bottom-left-radius\":\"3px\",\"width\":\"100%\"}},{\"selectors\":[{\"name\":\"wrapper\",\"label\":\"wrapper\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"box-sizing\":\"border-box\",\"padding-top\":\"20px\",\"padding-right\":\"20px\",\"padding-bottom\":\"20px\",\"padding-left\":\"20px\"}},{\"selectors\":[{\"name\":\"content-block\",\"label\":\"content-block\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"padding-bottom\":\"10px\",\"padding-top\":\"10px\"}},{\"selectors\":[{\"name\":\"footer\",\"label\":\"footer\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"clear\":\"both\",\"margin-top\":\"10px\",\"text-align\":\"center\",\"width\":\"100%\"}},{\"selectors\":[],\"selectorsAdd\":\".footer td, .footer p, .footer span, .footer a\",\"style\":{\"color\":\"rgb(153, 153, 153)\",\"font-size\":\"12px\",\"text-align\":\"center\"}},{\"selectors\":[],\"selectorsAdd\":\"h1, h2, h3, h4\",\"style\":{\"color\":\"rgb(0, 0, 0)\",\"font-family\":\"sans-serif\",\"font-weight\":\"400\",\"line-height\":\"1.4\",\"margin-top\":\"0px\",\"margin-right\":\"0px\",\"margin-left\":\"0px\",\"margin-bottom\":\"30px\"}},{\"selectors\":[],\"selectorsAdd\":\"h1\",\"style\":{\"font-size\":\"35px\",\"font-weight\":\"300\",\"text-align\":\"center\",\"text-transform\":\"capitalize\"}},{\"selectors\":[],\"selectorsAdd\":\"p, ul, ol\",\"style\":{\"font-family\":\"sans-serif\",\"font-size\":\"14px\",\"font-weight\":\"normal\",\"margin-top\":\"0px\",\"margin-right\":\"0px\",\"margin-left\":\"0px\",\"margin-bottom\":\"15px\"}},{\"selectors\":[],\"selectorsAdd\":\"p li, ul li, ol li\",\"style\":{\"list-style-position\":\"inside\",\"margin-left\":\"5px\"}},{\"selectors\":[],\"selectorsAdd\":\"a\",\"style\":{\"color\":\"rgb(52, 152, 219)\",\"text-decoration-line\":\"underline\",\"text-decoration-style\":\"initial\",\"text-decoration-color\":\"initial\"}},{\"selectors\":[{\"name\":\"btn\",\"label\":\"btn\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"box-sizing\":\"border-box\",\"width\":\"100%\"}},{\"selectors\":[],\"selectorsAdd\":\".btn > tbody > tr > td\",\"style\":{\"padding-bottom\":\"15px\"}},{\"selectors\":[],\"selectorsAdd\":\".btn table\",\"style\":{\"width\":\"auto\"}},{\"selectors\":[],\"selectorsAdd\":\".btn table td\",\"style\":{\"background-color\":\"rgb(255, 255, 255)\",\"border-top-left-radius\":\"5px\",\"border-top-right-radius\":\"5px\",\"border-bottom-right-radius\":\"5px\",\"border-bottom-left-radius\":\"5px\",\"text-align\":\"center\"}},{\"selectors\":[],\"selectorsAdd\":\".btn a\",\"style\":{\"background-color\":\"rgb(255, 255, 255)\",\"border-top-width\":\"1px\",\"border-right-width\":\"1px\",\"border-bottom-width\":\"1px\",\"border-left-width\":\"1px\",\"border-top-style\":\"solid\",\"border-right-style\":\"solid\",\"border-bottom-style\":\"solid\",\"border-left-style\":\"solid\",\"border-top-color\":\"rgb(52, 152, 219)\",\"border-right-color\":\"rgb(52, 152, 219)\",\"border-bottom-color\":\"rgb(52, 152, 219)\",\"border-left-color\":\"rgb(52, 152, 219)\",\"border-image-source\":\"initial\",\"border-image-slice\":\"initial\",\"border-image-width\":\"initial\",\"border-image-outset\":\"initial\",\"border-image-repeat\":\"initial\",\"border-top-left-radius\":\"5px\",\"border-top-right-radius\":\"5px\",\"border-bottom-right-radius\":\"5px\",\"border-bottom-left-radius\":\"5px\",\"box-sizing\":\"border-box\",\"color\":\"rgb(52, 152, 219)\",\"cursor\":\"pointer\",\"display\":\"inline-block\",\"font-size\":\"14px\",\"font-weight\":\"bold\",\"margin-top\":\"0px\",\"margin-right\":\"0px\",\"margin-bottom\":\"0px\",\"margin-left\":\"0px\",\"padding-top\":\"12px\",\"padding-right\":\"25px\",\"padding-bottom\":\"12px\",\"padding-left\":\"25px\",\"text-decoration-line\":\"none\",\"text-decoration-style\":\"initial\",\"text-decoration-color\":\"initial\",\"text-transform\":\"capitalize\"}},{\"selectors\":[],\"selectorsAdd\":\".btn-primary table td\",\"style\":{\"background-color\":\"rgb(52, 152, 219)\"}},{\"selectors\":[],\"selectorsAdd\":\".btn-primary a\",\"style\":{\"background-color\":\"rgb(52, 152, 219)\",\"border-top-color\":\"rgb(52, 152, 219)\",\"border-right-color\":\"rgb(52, 152, 219)\",\"border-bottom-color\":\"rgb(52, 152, 219)\",\"border-left-color\":\"rgb(52, 152, 219)\",\"color\":\"rgb(255, 255, 255)\"}},{\"selectors\":[{\"name\":\"last\",\"label\":\"last\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"margin-bottom\":\"0px\"}},{\"selectors\":[{\"name\":\"first\",\"label\":\"first\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"margin-top\":\"0px\"}},{\"selectors\":[{\"name\":\"align-center\",\"label\":\"align-center\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"text-align\":\"center\"}},{\"selectors\":[{\"name\":\"align-right\",\"label\":\"align-right\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"text-align\":\"right\"}},{\"selectors\":[{\"name\":\"align-left\",\"label\":\"align-left\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"text-align\":\"left\"}},{\"selectors\":[{\"name\":\"clear\",\"label\":\"clear\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"clear\":\"both\"}},{\"selectors\":[{\"name\":\"mt0\",\"label\":\"mt0\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"margin-top\":\"0px\"}},{\"selectors\":[{\"name\":\"mb0\",\"label\":\"mb0\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"margin-bottom\":\"0px\"}},{\"selectors\":[{\"name\":\"preheader\",\"label\":\"preheader\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"color\":\"transparent\",\"display\":\"none\",\"height\":\"0px\",\"max-height\":\"0px\",\"max-width\":\"0px\",\"opacity\":\"0\",\"overflow-x\":\"hidden\",\"overflow-y\":\"hidden\",\"visibility\":\"hidden\",\"width\":\"0px\"}},{\"selectors\":[],\"selectorsAdd\":\".powered-by a\",\"style\":{\"text-decoration-line\":\"none\",\"text-decoration-style\":\"initial\",\"text-decoration-color\":\"initial\"}},{\"selectors\":[],\"selectorsAdd\":\"hr\",\"style\":{\"border-top-width\":\"0px\",\"border-right-width\":\"0px\",\"border-left-width\":\"0px\",\"border-top-style\":\"initial\",\"border-right-style\":\"initial\",\"border-left-style\":\"initial\",\"border-top-color\":\"initial\",\"border-right-color\":\"initial\",\"border-left-color\":\"initial\",\"border-image-source\":\"initial\",\"border-image-slice\":\"initial\",\"border-image-width\":\"initial\",\"border-image-outset\":\"initial\",\"border-image-repeat\":\"initial\",\"border-bottom-width\":\"1px\",\"border-bottom-style\":\"solid\",\"border-bottom-color\":\"rgb(246, 246, 246)\",\"margin-top\":\"20px\",\"margin-right\":\"0px\",\"margin-bottom\":\"20px\",\"margin-left\":\"0px\"}},{\"selectors\":[],\"selectorsAdd\":\"table[class=\\\"body\\\"] h1\",\"style\":{\"font-size\":\"28px !important\",\"margin-bottom\":\"10px !important\"},\"mediaText\":\"only screen and (max-width: 620px)\",\"atRuleType\":\"media\"},{\"selectors\":[],\"selectorsAdd\":\"table[class=\\\"body\\\"] p, table[class=\\\"body\\\"] ul, table[class=\\\"body\\\"] ol, table[class=\\\"body\\\"] td, table[class=\\\"body\\\"] span, table[class=\\\"body\\\"] a\",\"style\":{\"font-size\":\"16px !important\"},\"mediaText\":\"only screen and (max-width: 620px)\",\"atRuleType\":\"media\"},{\"selectors\":[],\"selectorsAdd\":\"table[class=\\\"body\\\"] .wrapper, table[class=\\\"body\\\"] .article\",\"style\":{\"padding-top\":\"10px !important\",\"padding-right\":\"10px !important\",\"padding-bottom\":\"10px !important\",\"padding-left\":\"10px !important\"},\"mediaText\":\"only screen and (max-width: 620px)\",\"atRuleType\":\"media\"},{\"selectors\":[],\"selectorsAdd\":\"table[class=\\\"body\\\"] .content\",\"style\":{\"padding-top\":\"0px !important\",\"padding-right\":\"0px !important\",\"padding-bottom\":\"0px !important\",\"padding-left\":\"0px !important\"},\"mediaText\":\"only screen and (max-width: 620px)\",\"atRuleType\":\"media\"},{\"selectors\":[],\"selectorsAdd\":\"table[class=\\\"body\\\"] .container\",\"style\":{\"padding-top\":\"0px !important\",\"padding-right\":\"0px !important\",\"padding-bottom\":\"0px !important\",\"padding-left\":\"0px !important\",\"width\":\"100% !important\"},\"mediaText\":\"only screen and (max-width: 620px)\",\"atRuleType\":\"media\"},{\"selectors\":[],\"selectorsAdd\":\"table[class=\\\"body\\\"] .main\",\"style\":{\"border-left-width\":\"0px !important\",\"border-top-left-radius\":\"0px !important\",\"border-top-right-radius\":\"0px !important\",\"border-bottom-right-radius\":\"0px !important\",\"border-bottom-left-radius\":\"0px !important\",\"border-right-width\":\"0px !important\"},\"mediaText\":\"only screen and (max-width: 620px)\",\"atRuleType\":\"media\"},{\"selectors\":[],\"selectorsAdd\":\"table[class=\\\"body\\\"] .btn table\",\"style\":{\"width\":\"100% !important\"},\"mediaText\":\"only screen and (max-width: 620px)\",\"atRuleType\":\"media\"},{\"selectors\":[],\"selectorsAdd\":\"table[class=\\\"body\\\"] .btn a\",\"style\":{\"width\":\"100% !important\"},\"mediaText\":\"only screen and (max-width: 620px)\",\"atRuleType\":\"media\"},{\"selectors\":[],\"selectorsAdd\":\"table[class=\\\"body\\\"] .img-responsive\",\"style\":{\"height\":\"auto !important\",\"max-width\":\"100% !important\",\"width\":\"auto !important\"},\"mediaText\":\"only screen and (max-width: 620px)\",\"atRuleType\":\"media\"},{\"selectors\":[{\"name\":\"ExternalClass\",\"label\":\"ExternalClass\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"style\":{\"width\":\"100%\"},\"mediaText\":\"all\",\"atRuleType\":\"media\"},{\"selectors\":[{\"name\":\"ExternalClass\",\"label\":\"ExternalClass\",\"type\":1,\"active\":true,\"private\":false,\"protected\":false}],\"selectorsAdd\":\".ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div\",\"style\":{\"line-height\":\"100%\"},\"mediaText\":\"all\",\"atRuleType\":\"media\"},{\"selectors\":[],\"selectorsAdd\":\".apple-link a\",\"style\":{\"color\":\"inherit !important\",\"font-family\":\"inherit !important\",\"font-size\":\"inherit !important\",\"font-weight\":\"inherit !important\",\"line-height\":\"inherit !important\",\"text-decoration-line\":\"none !important\",\"text-decoration-style\":\"initial !important\",\"text-decoration-color\":\"initial !important\"},\"mediaText\":\"all\",\"atRuleType\":\"media\"},{\"selectors\":[],\"selectorsAdd\":\".btn-primary table td:hover\",\"style\":{\"background-color\":\"rgb(52, 73, 94) !important\"},\"mediaText\":\"all\",\"atRuleType\":\"media\"},{\"selectors\":[],\"selectorsAdd\":\".btn-primary a:hover\",\"style\":{\"background-color\":\"rgb(52, 73, 94) !important\",\"border-top-color\":\"rgb(52, 73, 94) !important\",\"border-right-color\":\"rgb(52, 73, 94) !important\",\"border-bottom-color\":\"rgb(52, 73, 94) !important\",\"border-left-color\":\"rgb(52, 73, 94) !important\"},\"mediaText\":\"all\",\"atRuleType\":\"media\"}]"
}
      """
    And the "Content-Type" request header contains "application/json"
    When I request "/email_templates" using HTTP POST
    Then the response code is 201

    Examples:
      | name                       | category            |
      | test behat email tpl one   | lead                |
      | test behat email tpl two   | offer_vehicle_stock |
      | test behat email tpl three | opportunity         |

  Scenario: Api - GET email_templates: Retrieves the collection of EmailTemplate resources.
    When I request "/email_templates" using HTTP GET
    Then the response code is 200
    And the response body matches:
    """
    /"name":"test behat email tpl two","category":\{"id":"offer_vehicle_stock","name":"offer_vehicle_stock"\},"@type":"emailtemplate"\}/
    """
    And the response body matches:
    """
    /"name":"test behat email tpl three","category":\{"id":"opportunity","name":"opportunity"\},"@type":"emailtemplate"\}/
    """


  Scenario: Api - GET email_templates: Retrieves a EmailTemplate resource. - TO DO WIP
    When I request email template by name "test behat email tpl one" using HTTP GET
    Then the response code is 200
    And the response body matches:
    """
    /"name":"test behat email tpl one"/
    """
    And the response body matches:
    """
    /"category":{"id":"lead","name":"lead"}/
    """
    And the response body matches:
    """
    /"@type":"emailtemplate"/
    """
